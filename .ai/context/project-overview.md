## 1. 개요 (Overview)

본 서비스는 동일한 암호화폐(대표적으로 **BTC**)가

**한국 거래소와 해외 거래소 간 가격 차이(김치 프리미엄)** 를 이용하여

차익을 추구하는 **헤지 기반 트레이딩 모델**을 제공한다.

한국 거래소의 현물 포지션과

해외 거래소의 선물 포지션을 **동시에 운용**함으로써

가격 방향성 리스크를 최소화하고,

프리미엄 변화에 따른 수익을 실현하는 것이 핵심 목적이다.

---

## 2. 핵심 개념 (Core Concepts)

### 2.1 김치 프리미엄 (Kimchi Premium)

김치 프리미엄이란,

**한국 거래소의 암호화폐 가격이 해외 거래소 대비 얼마나 높은지를 백분율로 표현한 값**이다.

### 계산식

> ⚠️ 기존 계산식은 분모 선택이 다소 부정확하여 보정함
>

```kotlin
// 권장 계산식
((koreanPrice - (foreignPrice * exchangeRate))
        / (foreignPrice * exchangeRate)) * 100

```

- `koreanPrice` : 한국 거래소 BTC 현물 가격 (KRW)
- `foreignPrice` : 해외 거래소 BTC 선물 가격 (USD)
- `exchangeRate` : 원/달러 환율

### 보정 사유

- **해외 기준 가격 대비 얼마나 프리미엄이 붙었는지**가 본질이므로

  분모는 `foreignPrice * exchangeRate`가 타당함

- 한국 가격을 분모로 사용할 경우 프리미엄 왜곡 발생 가능

### 출력 포맷

```kotlin
premium.roundTo(2)// 소수점 2자리

```

---

### 2.2 포지션 (Position)

포지션은 **프리미엄을 매수한 상태**를 의미하며,

한국 현물과 해외 선물을 **동일 수량으로 동시에 진입**한다.

- 이때, 해외거래소의 레버리지를 통해 작은 시드로 큰 수익을 가져올 수 있으나, ‘청산’리스크 발생

### 예시

| 항목          | 값               |
|-------------|-----------------|
| 한국 거래소      | 빗썸              |
| 해외 거래소      | 바이낸스 (선물)       |
| BTC 수량      | 0.5 BTC         |
| 레버리지        | 1x              |
| 빗썸 BTC 가격   | 129,555,000 KRW |
| 바이낸스 BTC 가격 | 89,277.1 USD    |
| 환율          | 1,432.6         |
| 진입 프리미엄     | 1.28%           |

### 포지션 구성

- **한국 거래소**: BTC 현물 매수 (Long)
- **해외 거래소**: BTC 선물 매도 (Short)

→ 가격 방향성 중립 (Delta Neutral)

---

### 2.3 손익 구조 (PnL Structure)

포지션의 손익은 **프리미엄 변화량**에 의해 결정된다.

- 프리미엄 하락 → **이익**
- 프리미엄 상승 → **손실**

> 단, 가격 자체의 상승/하락은
>
>
> 현물(Long) ↔ 선물(Short) 구조로 상쇄됨
>

---

### 2.4 포지션 매도 (Close Position)

포지션 매도는 다음 행위를 의미한다.

- **동일 시점에**
    - 한국 거래소 BTC 현물 매도
    - 해외 거래소 BTC 선물 매수

이를 통해 **현재 프리미엄 기준 손익을 확정(realize)** 한다.

---

### 2.5 최종 손익 (Net Profit)

최종 손익은 단순 프리미엄 차이뿐 아니라

다음 요소를 모두 반영하여 계산된다.

### 손익 구성 요소

- 프리미엄 변화에 따른 차익
- 거래 수수료
    - 한국 거래소 현물 수수료
    - 해외 거래소 선물 수수료
- 펀딩비 (Funding Fee)
- 환율 변동 손익 (옵션)

---

## 3. 버전별 트레이딩 모델 (Trading Versions)

### 3.1 Trading V1 – 수동 입력 기반

### 특징

- 실시간 프리미엄 계산
    - 한국 거래소 API
    - 해외 거래소 API
    - 환율 API
- 회원이 직접 매수/매도 포지션 입력
- 손익 계산 및 저장

### 장점

- 구현 난이도 낮음
- 초기 MVP 적합

### 한계

- 실계좌 데이터 불일치 가능
- 사용자 입력 오류 리스크

---

### 3.2 Trading V2 – 실계좌 연동

### 특징

- 바이낸스 / 빗썸 API Token 연동
- 실 거래 내역 기반 포지션 자동 계산
- 매수/매도 시 자동 정합성 검증

### 추가 고려사항

- API Rate Limit
- API Key 암호화 저장
- Read / Trade 권한 분리

---

### 3.3 Trading V3 – 자동 매매

### 특징

- 프리미엄이 특정 조건 진입 시
    - 자동 매수
    - 자동 매도
- 사용자 전략 설정 가능

### 예시 전략

- 프리미엄 ≥ 3.0% → 진입
- 프리미엄 ≤ 0.5% → 청산

---

## 4. 차트 (Chart)

### 제공 차트

- 김치 프리미엄 시계열 차트
    - 1분
    - 3분
    - 5분
    - 10분
    - 30분
    - 1시간
    - 1일
    - 1주

### 환율 옵션

- 실시간 환율
- 고정 환율 (사용자 지정)

---

## 5. 회원 기능 (Member)

### 제공 정보

- 매수 / 매도 이력
- 보유 포지션 현황
- 총 누적 수익률
- 기간별 수익률
    - 일간 / 주간 / 월간

---

## 6. 리스크 및 유의사항

- 환율 급변 리스크
- 거래소 간 유동성 차이
- 펀딩비 급등
- API 장애
- 자동 매매 시 슬리피지

---

## 7. 향후 확장 아이디어

- ETH, SOL 등 다중 코인 지원
- 거래소 다각화 (코인원, OKX 등)
- 포지션 부분 청산
- 리스크 지표 (VaR, MDD)
- 백테스트 기능